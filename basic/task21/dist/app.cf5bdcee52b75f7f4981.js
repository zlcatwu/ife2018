!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o({name:t,salary:e}){this.id=o.uid++,this.name=t,this.salary=e}function r(t,e){o.call(this,{name:t,salary:e})}function s(t,e){o.call(this,{name:t,salary:e})}function i({cash:t=0,seats:e=0,staff:n=[],menu:o=[]}){this.cash=t,this.seats=e,this.staff=n,this.menu=o,this._queue=[],this._serving=[]}function u(t){this.name=t,this.resturant=null}function a({name:t,cost:e,price:n}){this.name=t,this.cost=e,this.price=n}n.r(e),o.uid=0,r.getInstance=function(){let t=null;return function(e,n){return null===t&&(t=new r(e,n)),t}}(),r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.cook=function(t,e){console.log(`厨子 ${this.name} 为 ${e.name} 做 ${t.name}`),s.getInstance().sendDish(t,e)},s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.getInstance=function(){let t=null;return function(e,n){return null===t&&(t=new s(e,n)),t}}(),s.prototype.getOrder=function(t,e){console.log(`服务员 ${this.name} 为 ${t.name} 进行点餐服务`);const n=t.order(e),o=r.getInstance();console.log(`服务员 ${this.name} 通知 ${o.name} 为 ${t.name} 做 ${n.name}`),o.cook(n,t)},s.prototype.sendDish=function(t,e){console.log(`服务员 ${this.name} 为 ${e.name} 送 ${t.name}`),e.eat(t)},i.prototype.hire=function(t){if(-1!==this.staff.map(t=>t.id).indexOf(t.id))throw new Error("该员工已被雇佣");this.staff.push(t)},i.prototype.fire=function(t){const e=this.staff.map(t=>t.id).indexOf(t.id);if(-1===e)throw new Error("该员工没有被雇佣");this.staff.splice(e,1)},i.prototype.enter=function(t){console.log(`顾客 ${t.name} 进入了饭店`),t.enter(this),this._serving.length<this.seats?(this._serving.push(t),setTimeout(()=>{this.onServe(t)},0)):(console.log(`顾客 ${t.name} 开始排队`),this._queue.push(t))},i.prototype.onServe=function(t){console.log(`顾客 ${t.name} 找到了座位`);this.staff.filter(t=>t instanceof s)[0].getOrder(t,this.menu)},i.prototype.onExit=function(t){console.log(`顾客 ${t.name} 离开了饭店`),this._serving=[],this._queue.length&&this.onServe(this._queue.shift())},u.prototype.enter=function(t){this.resturant=t},u.prototype.order=function(t){const e=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}(0,t.length-1);return console.log(`顾客 ${this.name} 点了 ${t[e].name}`),t[e]},u.prototype.eat=function(t){console.log(`顾客 ${this.name} 吃了 ${t.name}`),this.resturant.onExit(this)};const c=[];c.push(new a({name:"京酱肉丝",cost:1,price:10})),c.push(new a({name:"米饭",cost:5,price:20})),c.push(new a({name:"番茄炒蛋",cost:10,price:30}));const f=new i({cash:1e4,seats:1,staff:[],menu:c});f.hire(r.getInstance("李大嘴",1e3)),f.hire(s.getInstance("白展堂",1e3)),f.enter(new u("老邢")),f.enter(new u("燕小六")),f.enter(new u("李大娘"))}]);